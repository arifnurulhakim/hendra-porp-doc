# ğŸ”„ Activity Diagrams & Flowcharts - Hendra Prop

**Dokumen Activity Diagrams (Business Process Flows)**  
Proyek: Hendra Prop - Sistem Manajemen Properti  
Tanggal: 31 Oktober 2025  
Versi: 1.0.0

---

## 1. Activity Diagram Overview

Activity Diagram menunjukkan alur aktivitas/proses bisnis dari awal hingga akhir, dengan decision points dan parallel activities.

**Notasi:**
- **Start (â—)** - Titik mulai
- **End (â—‰)** - Titik selesai
- **Activity [â–¡]** - Aksi/proses
- **Decision {â—‡}** - Decision point (if/else)
- **Fork/Join (â•)** - Parallel activities
- **Swimlane (â”‚)** - Responsibility area per actor

---

## 2. Activity Diagram: End-to-End Property Listing to Sale

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SWIMLANE: AGEN          â”‚  SYSTEM         â”‚  BUYER      â”‚  ADMIN KANTOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â—  START                â”‚                â”‚             â”‚
    â”‚                       â”‚                â”‚             â”‚
    â–¼                       â”‚                â”‚             â”‚
[Login ke Sistem]          â”‚                â”‚             â”‚
    â”‚                       â”‚                â”‚             â”‚
    â–¼                       â”‚                â”‚             â”‚
[Create New Property]      â”‚                â”‚             â”‚
    â”‚                       â”‚                â”‚             â”‚
    â–¼                       â”‚                â”‚             â”‚
[Input Data Properti]      â”‚                â”‚             â”‚
(Judul, harga, deskripsi)  â”‚                â”‚             â”‚
    â”‚                       â”‚                â”‚             â”‚
    â–¼                       â”‚                â”‚             â”‚
[Upload Foto (max 10)]     â”‚                â”‚             â”‚
    â”‚                       â”‚                â”‚             â”‚
    â–¼                       â–¼                â”‚             â”‚
[Submit Form]          [Validate Data]      â”‚             â”‚
    â”‚                       â”‚                â”‚             â”‚
    â”‚                       â–¼                â”‚             â”‚
    â”‚                  {Valid?}              â”‚             â”‚
    â”‚                    /    \              â”‚             â”‚
    â”‚               [No]      [Yes]          â”‚             â”‚
    â”‚                /            \          â”‚             â”‚
    â—€â”€â”€[Error Msg]â”€â”€              â”‚         â”‚             â”‚
    â”‚                              â–¼         â”‚             â”‚
    â”‚                    [Optimize Photos]   â”‚             â”‚
    â”‚                    (Resize & Compress) â”‚             â”‚
    â”‚                              â”‚         â”‚             â”‚
    â”‚                              â–¼         â”‚             â”‚
    â”‚                    [Generate Slug]     â”‚             â”‚
    â”‚                              â”‚         â”‚             â”‚
    â”‚                              â–¼         â”‚             â”‚
    â”‚                    [Save to Database]  â”‚             â”‚
    â”‚                              â”‚         â”‚             â”‚
    â”‚                              â–¼         â”‚             â”‚
    â”‚                    {Publish Mode?}     â”‚             â”‚
    â”‚                      /          \      â”‚             â”‚
    â”‚                [Public]      [Private]â”‚             â”‚
    â”‚                  /                \    â”‚             â”‚
    â”‚                 â–¼                  â–¼   â”‚             â”‚
    â”‚      [Set is_public=true]  [Set is_public=false]    â”‚
    â”‚      [Set published_at]    [Generate Token Link]    â”‚
    â”‚                  â”‚                  â”‚  â”‚             â”‚
    â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚             â”‚
    â”‚                            â–¼            â”‚             â”‚
    â”‚                    [Log Activity]       â”‚             â”‚
    â”‚                            â”‚            â”‚             â”‚
    â”‚                            â–¼            â”‚             â”‚
    â”‚                    [Send Notification]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
    â—€â”€â”€[Success Msg]â”€â”€â”€â”€                     â”‚             â”‚
    â”‚                                         â”‚             â–¼
    â”‚                                         â”‚    [Receive Notification]
    â”‚                                         â”‚             â”‚
    â”‚                                         â”‚             â–¼
    â”‚                                         â”‚    {Approve/Reject?}
    â”‚                                         â”‚       /        \
    â”‚                                         â”‚  [Approve]  [Reject]
    â”‚                                         â”‚     /            \
    â”‚                                         â–¼    â–¼              â–¼
    â”‚                                    [Set Status]     [Send Reason]
    â”‚                                    [Approved]             â”‚
    â”‚                                         â”‚                 â–¼
    â”‚â—€â”€â”€â”€â”€[Notification: Approved]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         [Notify Agen]
    â”‚                                         â”‚                 â”‚
    â”‚                                         â–¼                 â—€â”€â”
    â”‚                              {Property on Marketplace}      â”‚
    â”‚                                         â”‚                   â”‚
    â”‚                                         â”‚                   â”‚
    â”‚                                         â–¼                   â”‚
    â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€
    â”‚                                         â”‚                   â”‚
    â”‚                                         â”‚  â— Buyer START    â”‚
    â”‚                                         â”‚        â”‚          â”‚
    â”‚                                         â”‚        â–¼          â”‚
    â”‚                                         â”‚  [Browse Listings]â”‚
    â”‚                                         â”‚        â”‚          â”‚
    â”‚                                         â”‚        â–¼          â”‚
    â”‚                                         â”‚  [Search & Filter]â”‚
    â”‚                                         â”‚        â”‚          â”‚
    â”‚                                         â”‚        â–¼          â”‚
    â”‚                                         â–¼  [View Detail]   â”‚
    â”‚                                [Query Database]â”‚           â”‚
    â”‚                                         â”‚      â–¼           â”‚
    â”‚                                         â”‚ [Display Info]   â”‚
    â”‚                                         â”‚      â”‚           â”‚
    â”‚                                         â”‚      â–¼           â”‚
    â”‚                                         â”‚ {Interested?}    â”‚
    â”‚                                         â”‚   /      \       â”‚
    â”‚                                         â”‚[No]      [Yes]   â”‚
    â”‚                                         â”‚ /          \     â”‚
    â”‚                                         â–¼â—‰         [Contact Agent]
    â”‚                                         END           â”‚    â”‚
    â”‚                                                       â–¼    â”‚
    â”‚                                              [Open WhatsApp]
    â”‚                                                       â”‚    â”‚
    â”‚                                                       â–¼    â”‚
    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[Buyer Contact via WA]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚                                                            â”‚
    â”‚ (Negotiation happens externally)                          â”‚
    â”‚                                                            â”‚
    â–¼                                                            â”‚
[Deal Reached]                                                  â”‚
    â”‚                                                            â”‚
    â–¼                                                            â”‚
[Inform Admin Kantor]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
    â”‚                                                            â–¼
    â”‚                                                   [Input Transaction]
    â”‚                                                            â”‚
    â”‚                                                            â–¼
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[Select Property]
    â”‚                          â”‚                                 â”‚
    â”‚                          â”‚                                 â–¼
    â”‚                          â”‚                    [Auto-fill Agent Owner]
    â”‚                          â”‚                                 â”‚
    â”‚                          â”‚                                 â–¼
    â”‚                          â”‚                    [Input Buyer Info]
    â”‚                          â”‚                                 â”‚
    â”‚                          â”‚                                 â–¼
    â”‚                          â”‚                    [Input Final Price]
    â”‚                          â”‚                                 â”‚
    â”‚                          â”‚                                 â–¼
    â”‚                          â–¼                    [Calculate Commission]
    â”‚                   [Commission Preview]                     â”‚
    â”‚                          â”‚                                 â–¼
    â”‚                          â”‚                        {Commission OK?}
    â”‚                          â”‚                          /          \
    â”‚                          â”‚                     [Yes]          [No]
    â”‚                          â”‚                      /                \
    â”‚                          â”‚                     â–¼                  â–¼
    â”‚                          â”‚              [Save Transaction]  [Adjust %]
    â”‚                          â”‚                     â”‚                  â”‚
    â”‚                          â”‚                     â–¼                  â”‚
    â”‚                          â”‚           [Generate Commissions]â—€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                          â”‚                     â”‚
    â”‚                          â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚     â”‚               â”‚               â”‚
    â”‚                          â”‚     â–¼               â–¼               â–¼
    â”‚                          â”‚ [Comm Agent]  [Comm Buyer]  [Comm Office]
    â”‚                          â”‚     â”‚               â”‚               â”‚
    â”‚                          â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                          â”‚                     â”‚
    â”‚                          â”‚                     â–¼
    â”‚                          â”‚          [Update Property Status]
    â”‚                          â”‚          (Status â†’ Sold/Rented)
    â”‚                          â”‚                     â”‚
    â”‚                          â”‚                     â–¼
    â”‚                          â”‚             [Log Activity]
    â”‚                          â”‚                     â”‚
    â”‚                          â”‚                     â–¼
    â”‚                          â”‚          [Send Notifications]
    â”‚                          â”‚            /              \
    â”‚                          â”‚           â–¼                â–¼
    â”‚â—€â”€â”€[Notif: Property Sold]â”€â”˜     [To Agen Owner]  [To Agen Buyer]
    â”‚                                                       â”‚
    â–¼                                                       â–¼
[View Dashboard]                                    [View Dashboard]
    â”‚                                                       â”‚
    â–¼                                                       â–¼
[See Pending Commission]                        [See Pending Commission]
    â”‚                                                       â”‚
    â”‚                                                       â”‚
    â”‚        (Later: Admin marks as Paid)                   â”‚
    â”‚                      â”‚                                â”‚
    â”‚                      â–¼                                â”‚
    â”‚             [Mark Commission as Paid]â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                      â”‚                                â”‚
    â”‚                      â–¼                                â”‚
    â”‚           [Set status = paid]                         â”‚
    â”‚           [Set paid_date]                             â”‚
    â”‚                      â”‚                                â”‚
    â”‚                      â–¼                                â”‚
    â”‚           [Send Payment Notification]                 â”‚
    â”‚                  /          \                         â”‚
    â”‚                 â–¼            â–¼                        â”‚
    â”‚â—€â”€â”€[Email Notif]   [Dashboard Notif]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
    â”‚                                                        â”‚
    â–¼                                                        â–¼
[See Paid Commission]                          [See Paid Commission]
    â”‚                                                        â”‚
    â–¼                                                        â–¼
   â—‰  END                                                  â—‰  END
```

---

## 3. Flowchart: Commission Calculation Logic

```
                    â— START
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Get Transaction Data      â”‚
        â”‚ â€¢ Final Price             â”‚
        â”‚ â€¢ Commission %            â”‚
        â”‚ â€¢ Agent Owner ID          â”‚
        â”‚ â€¢ Agent Buyer ID (or null)â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Calculate Total Commissionâ”‚
        â”‚ total = price Ã— comm_%    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
                {Agent Buyer exists?}
                  /              \
             [YES]              [NO]
              /                    \
             â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SCENARIO A: 2 Agents â”‚  â”‚ SCENARIO B: 1 Agent  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Agent Owner: 35%     â”‚  â”‚ Agent Owner: 70%     â”‚
â”‚ Agent Buyer: 35%     â”‚  â”‚ Office: 30%          â”‚
â”‚ Office: 30%          â”‚  â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                         â”‚
           â–¼                         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Create 3     â”‚          â”‚ Create 2     â”‚
   â”‚ Commission   â”‚          â”‚ Commission   â”‚
   â”‚ Records      â”‚          â”‚ Records      â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                         â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Save to commissions   â”‚
           â”‚ table with status     â”‚
           â”‚ = 'pending'           â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Return Commission     â”‚
           â”‚ Records Array         â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
                    â—‰ END
```

**Sample Output:**
```json
// Scenario A (2 Agents): Rp 1M, 2% commission
[
  {
    "agent_id": 3,
    "amount": 7000000,
    "percentage": 35,
    "type": "agent_owner"
  },
  {
    "agent_id": 5,
    "amount": 7000000,
    "percentage": 35,
    "type": "agent_buyer"
  },
  {
    "office_id": 1,
    "amount": 6000000,
    "percentage": 30,
    "type": "office"
  }
]
```

---

## 4. Flowchart: Public vs Private Property Access

```
                        â— Buyer START
                             â”‚
                             â–¼
                    {Access Method?}
                      /            \
            [Public URL]          [Private URL with Token]
                  /                        \
                 â–¼                          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Access Marketplace  â”‚    â”‚ Extract Token from URL  â”‚
    â”‚ (No Auth Required)  â”‚    â”‚                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                           â”‚
               â–¼                           â–¼
    [Query: is_public=true]     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    [AND status=available]      â”‚ Validate Token       â”‚
               â”‚                 â”‚ â€¢ Exists?            â”‚
               â–¼                 â”‚ â€¢ Not expired?       â”‚
    [Display Listings]           â”‚ â€¢ Not fully used?    â”‚
               â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â–¼                            â”‚
    {Select Property?}              {Token Valid?}
         /      \                      /         \
    [No]       [Yes]               [No]         [Yes]
      â”‚          â”‚                  â”‚             â”‚
      â–¼          â–¼                  â–¼             â–¼
     END   [Click Detail]   [Show Error]  [Increment Access]
               â”‚             â€¢ Link Expired       â”‚
               â”‚             â€¢ Already Used       â–¼
               â”‚                  â”‚        [Load Property]
               â”‚                  â–¼               â”‚
               â”‚                 END              â”‚
               â”‚                                  â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Display Property     â”‚
                   â”‚ Detail Page          â”‚
                   â”‚ â€¢ Photos Gallery     â”‚
                   â”‚ â€¢ Description        â”‚
                   â”‚ â€¢ Price & Specs      â”‚
                   â”‚ â€¢ Agent Contact      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                   [Increment views_count]
                              â”‚
                              â–¼
                   {Interested to Contact?}
                         /         \
                    [No]           [Yes]
                      â”‚              â”‚
                      â–¼              â–¼
                     END    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Click WA/Phoneâ”‚
                            â”‚ Button        â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                            [Open WhatsApp]
                            (Pre-filled message)
                                    â”‚
                                    â–¼
                            [Contact Agent]
                            (External to system)
                                    â”‚
                                    â–¼
                                   â—‰ END
```

---

## 5. Activity Diagram: Transaction & Commission Flow

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SWIMLANE: ADMIN KANTOR  â”‚  SYSTEM               â”‚  AGEN OWNER  â”‚  AGEN BUYER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â— START                 â”‚                      â”‚             â”‚
    â”‚                       â”‚                      â”‚             â”‚
    â–¼                       â”‚                      â”‚             â”‚
[Login to Admin Panel]     â”‚                      â”‚             â”‚
    â”‚                       â”‚                      â”‚             â”‚
    â–¼                       â”‚                      â”‚             â”‚
[Navigate to Transactions] â”‚                      â”‚             â”‚
    â”‚                       â”‚                      â”‚             â”‚
    â–¼                       â”‚                      â”‚             â”‚
[Click "New Transaction"]  â”‚                      â”‚             â”‚
    â”‚                       â”‚                      â”‚             â”‚
    â–¼                       â–¼                      â”‚             â”‚
[Select Property]      [Load Available]           â”‚             â”‚
                       [Properties List]           â”‚             â”‚
    â”‚                       â”‚                      â”‚             â”‚
    â–¼                       â–¼                      â”‚             â”‚
[Property Selected]    [Auto-fill Agent Owner]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
    â”‚                       â”‚                                    â”‚
    â–¼                       â”‚                                    â”‚
{Need Agent Buyer?}         â”‚                                    â”‚
   /        \               â”‚                                    â”‚
[No]       [Yes]            â”‚                                    â”‚
  â”‚          â”‚               â”‚                                    â”‚
  â”‚          â–¼               â”‚                                    â”‚
  â”‚   [Select Agent Buyer]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
  â”‚          â”‚               â”‚                                    â”‚       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                    â”‚       â”‚
             â”‚               â”‚                                    â”‚       â”‚
             â–¼               â”‚                                    â”‚       â”‚
[Input Buyer Info]          â”‚                                    â”‚       â”‚
(Name, phone, email)        â”‚                                    â”‚       â”‚
             â”‚               â”‚                                    â”‚       â”‚
             â–¼               â”‚                                    â”‚       â”‚
[Input Transaction Details] â”‚                                    â”‚       â”‚
â€¢ Type (sale/rent)          â”‚                                    â”‚       â”‚
â€¢ Final price               â”‚                                    â”‚       â”‚
â€¢ Commission % (default 2%) â”‚                                    â”‚       â”‚
â€¢ Transaction date          â”‚                                    â”‚       â”‚
             â”‚               â”‚                                    â”‚       â”‚
             â–¼               â–¼                                    â”‚       â”‚
[Submit]         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚       â”‚
                 â”‚ Calculate Commission â”‚                       â”‚       â”‚
                 â”‚ (CommissionService)  â”‚                       â”‚       â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚       â”‚
                            â”‚                                    â”‚       â”‚
                            â–¼                                    â”‚       â”‚
                  {How many agents?}                            â”‚       â”‚
                      /          \                               â”‚       â”‚
                  [1 Agent]    [2 Agents]                       â”‚       â”‚
                    /              \                             â”‚       â”‚
                   â–¼                â–¼                            â”‚       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚       â”‚
        â”‚ Split 70/30  â”‚  â”‚ Split 35/35/30   â”‚                 â”‚       â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚       â”‚
               â”‚                 â”‚                              â”‚       â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚       â”‚
                        â”‚                                       â”‚       â”‚
                        â–¼                                       â”‚       â”‚
              [Display Preview]                                 â”‚       â”‚
              â€¢ Agent Owner: Rp X                               â”‚       â”‚
              â€¢ Agent Buyer: Rp Y (if any)                      â”‚       â”‚
              â€¢ Office: Rp Z                                    â”‚       â”‚
                        â”‚                                       â”‚       â”‚
â—€â”€â”€[Review Preview]â”€â”€â”€â”€â”€â”˜                                       â”‚       â”‚
    â”‚                                                            â”‚       â”‚
    â–¼                                                            â”‚       â”‚
{Confirm?}                                                       â”‚       â”‚
  /    \                                                         â”‚       â”‚
[No]  [Yes]                                                      â”‚       â”‚
 â”‚      â”‚                                                        â”‚       â”‚
 â”‚      â–¼                                                        â”‚       â”‚
 â”‚  [Save Transaction]                                           â”‚       â”‚
 â”‚      â”‚                                                        â”‚       â”‚
 â”‚      â–¼                                                        â”‚       â”‚
 â”‚  [Create Commission Records]                                  â”‚       â”‚
 â”‚      â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚       â”‚
 â”‚      â”‚  â•‘ Parallel Execution      â•‘                          â”‚       â”‚
 â”‚      â–¼  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚       â”‚
 â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚       â”‚
 â”‚   â–¼          â–¼          â–¼          â–¼                          â”‚       â”‚
 â”‚[Comm 1]  [Comm 2]  [Comm 3]  [Update Status]                  â”‚       â”‚
 â”‚(Agent)   (Agent)  (Office)   (Sold/Rented)                    â”‚       â”‚
 â”‚   â”‚          â”‚          â”‚          â”‚                           â”‚       â”‚
 â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚       â”‚
 â”‚              â”‚                                                  â”‚       â”‚
 â”‚              â–¼                                                  â”‚       â”‚
 â”‚      [Log to Activity Log]                                     â”‚       â”‚
 â”‚              â”‚                                                  â”‚       â”‚
 â”‚              â–¼                                                  â”‚       â”‚
 â”‚      [Send Notifications]                                      â”‚       â”‚
 â”‚        /           \                                            â”‚       â”‚
 â”‚       â–¼             â–¼                                           â”‚       â”‚
 â”‚ [To Agent Owner] [To Agent Buyer]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚
 â”‚                                                                 â–¼       â–¼
 â–¼                                                    [Notif Received] [Notif]
[Success Message]                                               â”‚       â”‚
 â”‚                                                               â–¼       â–¼
 â–¼                                                      [View Dashboard]  â”‚
â—‰ Admin END                                                     â”‚       â”‚
                                                                 â–¼       â–¼
                                                    [See Pending Commission]
                                                                 â”‚       â”‚
                                                                 â–¼       â–¼
                                                                â—‰ END   â—‰ END
```

---

## 6. Activity Diagram: Mark Commission as Paid

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SWIMLANE: ADMIN KANTOR  â”‚  SYSTEM         â”‚  AGEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â— START                 â”‚                â”‚
    â”‚                       â”‚                â”‚
    â–¼                       â”‚                â”‚
[Navigate to Commissions]  â”‚                â”‚
    â”‚                       â”‚                â”‚
    â–¼                       â–¼                â”‚
[Filter: Pending Only] [Query Pending]      â”‚
                       [Commissions]         â”‚
    â”‚                       â”‚                â”‚
    â–¼                       â–¼                â”‚
[Display List]         [Show List]          â”‚
    â”‚                       â”‚                â”‚
    â–¼                       â”‚                â”‚
[Select Commission]        â”‚                â”‚
    â”‚                       â”‚                â”‚
    â–¼                       â”‚                â”‚
[Click "Mark as Paid"]     â”‚                â”‚
    â”‚                       â”‚                â”‚
    â–¼                       â–¼                â”‚
[Input Payment Details][Validate Input]     â”‚
â€¢ Paid Date                 â”‚                â”‚
â€¢ Payment Method            â”‚                â”‚
â€¢ Notes                     â”‚                â”‚
    â”‚                       â–¼                â”‚
    â”‚                  {Valid?}              â”‚
    â”‚                   /    \               â”‚
    â”‚              [No]      [Yes]           â”‚
    â”‚               /            \           â”‚
    â—€â”€[Error]â”€â”€â”€â”€â”€              â”‚           â”‚
    â”‚                            â–¼           â”‚
    â”‚                    [Update Status]     â”‚
    â”‚                    â€¢ status = 'paid'   â”‚
    â”‚                    â€¢ paid_date = input â”‚
    â”‚                    â€¢ notes = input     â”‚
    â”‚                            â”‚           â”‚
    â”‚                            â–¼           â”‚
    â”‚                    [Log Activity]      â”‚
    â”‚                    (Audit Trail)       â”‚
    â”‚                            â”‚           â”‚
    â”‚                            â–¼           â”‚
    â”‚                  [Send Notification]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
    â—€â”€[Success Msg]â”€â”€â”€â”€                              â”‚
    â”‚                                                  â–¼
    â–¼                                        [Receive Notif]
   â—‰ END                                              â”‚
                                                      â–¼
                                            [Check Dashboard]
                                                      â”‚
                                                      â–¼
                                            [See Paid Commission]
                                                      â”‚
                                                      â–¼
                                                     â—‰ END
```

---

## 7. Activity Diagram: Property Moderation/Approval Workflow

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SWIMLANE: AGEN          â”‚  SYSTEM         â”‚  ADMIN KANTOR â”‚  NOTIFICATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â— START                â”‚                â”‚               â”‚
    â”‚                      â”‚                â”‚               â”‚
    â–¼                      â”‚                â”‚               â”‚
[Create Property]         â”‚                â”‚               â”‚
    â”‚                      â”‚                â”‚               â”‚
    â–¼                      â”‚                â”‚               â”‚
[Input Data: Title,       â”‚                â”‚               â”‚
 Description, Price,      â”‚                â”‚               â”‚
 Photos, etc.]            â”‚                â”‚               â”‚
    â”‚                      â”‚                â”‚               â”‚
    â–¼                      â–¼                â”‚               â”‚
[Click Button]    [Set approval_status]    â”‚               â”‚
    â”‚             = 'DRAFT'                 â”‚               â”‚
    â”‚                      â”‚                â”‚               â”‚
    â”‚                      â–¼                â”‚               â”‚
    â”‚             [Save to Database]        â”‚               â”‚
    â”‚                      â”‚                â”‚               â”‚
    â—€â”€â”€[Success: Draft]â”€â”€â”€â”€â”˜                â”‚               â”‚
    â”‚                                        â”‚               â”‚
    â–¼                                        â”‚               â”‚
{Ready to Submit?}                          â”‚               â”‚
  /           \                             â”‚               â”‚
[No]          [Yes]                         â”‚               â”‚
 â”‚             â”‚                             â”‚               â”‚
 â–¼             â”‚                             â”‚               â”‚
[Edit Later]  â”‚                             â”‚               â”‚
 â”‚             â”‚                             â”‚               â”‚
 â—‰ END         â–¼                             â”‚               â”‚
[Click "Submit for Approval"]               â”‚               â”‚
              â”‚                              â”‚               â”‚
              â–¼                              â”‚               â”‚
              â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
              â”‚            â”‚ VALIDATION:     â”‚               â”‚
              â”‚            â”‚ - Min 1 photo   â”‚               â”‚
              â”‚            â”‚ - Title filled  â”‚               â”‚
              â”‚            â”‚ - Price > 0     â”‚               â”‚
              â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
              â–¼                     â–¼                        â”‚
              â”‚            {Valid?}                          â”‚
              â”‚             /      \                         â”‚
              â”‚        [No]        [Yes]                     â”‚
              â”‚         /             \                      â”‚
  â—€â”€â”€â”€[Error]â”€â”˜        â”‚              â–¼                      â”‚
  â”‚                    â”‚    [Update approval_status]         â”‚
  â–¼                    â”‚    = 'PENDING'                     â”‚
[Fix Issues]          â”‚              â”‚                      â”‚
  â”‚                    â”‚              â–¼                      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    [Set submitted_at = now()]      â”‚
                                     â”‚                      â”‚
                                     â–¼                      â”‚
                            [Log Submission Activity]        â”‚
                                     â”‚                      â”‚
                                     â–¼                      â–¼
                            [Trigger Notification]â”€â”€â”€â”€â–¶[Email to Admin]
                                     â”‚               "New submission"
                                     â”‚                      â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚                                          â”‚
                            â”‚  WAITING FOR ADMIN REVIEW...             â”‚
                            â”‚                                          â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚                      â”‚
                                     â”‚                      â–¼
                                     â”‚                [Admin Login]
                                     â”‚                      â”‚
                                     â”‚                      â–¼
                                     â”‚             [Open "Approvals" Menu]
                                     â”‚                      â”‚
                                     â”‚                      â–¼
                                     â”‚             [View Pending List]
                                     â”‚                      â”‚
                                     â”‚                      â–¼
                                     â”‚             [Select Property]
                                     â”‚                      â”‚
                                     â”‚                      â–¼
                                     â”‚             [Review Details:
                                     â”‚              Photos, Title,
                                     â”‚              Price, Description]
                                     â”‚                      â”‚
                                     â”‚                      â–¼
                                     â”‚              {Decision?}
                                     â”‚           /      |      \
                                     â”‚      [Approve] [Decline] [Revise]
                                     â”‚         /        |          \
                                     â”‚        /         â”‚           \
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”   â”‚           â”‚
                          â”‚ APPROVE      â”‚   â”‚           â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚           â”‚
                          â”‚                  â”‚           â”‚
                          â–¼                  â”‚           â”‚
                 [Update status = 'PUBLISHED'] â”‚           â”‚
                          â”‚                  â”‚           â”‚
                          â–¼                  â”‚           â”‚
                 [Set reviewed_by = admin_id]â”‚           â”‚
                 [Set reviewed_at = now()]  â”‚           â”‚
                 [Set published_at = now()] â”‚           â”‚
                          â”‚                  â”‚           â”‚
                          â–¼                  â”‚           â”‚
                 [Log Approval Activity]    â”‚           â”‚
                          â”‚                  â”‚           â”‚
                          â–¼                  â–¼           â”‚
                 [Send Notification]â”€â”€â”€â–¶[Email: Approved!]
                          â”‚                  â”‚           â”‚
              â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚           â”‚
              â”‚                              â”‚           â”‚
              â–¼                              â”‚           â”‚
     [Notification Received]                â”‚           â”‚
     "Property Approved!"                   â”‚           â”‚
              â”‚                              â”‚           â”‚
              â–¼                              â”‚           â”‚
     [Property NOW on                       â”‚           â”‚
      Public Marketplace]                   â”‚           â”‚
              â”‚                              â”‚           â”‚
              â—‰ END                          â”‚           â”‚
                                             â”‚           â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”       â”‚
                          â”‚ DECLINE              â”‚       â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
                          â”‚                              â”‚
                          â–¼                              â”‚
                 [Confirm Decline?]                      â”‚
                          â”‚                              â”‚
                       {Yes/No}                          â”‚
                        /     \                          â”‚
                   [No]       [Yes]                      â”‚
                     /           \                       â”‚
           â—€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â–¼                      â”‚
           â”‚            [Update status = 'DECLINED']    â”‚
           â”‚                      â”‚                      â”‚
           â”‚                      â–¼                      â”‚
           â”‚            [Set reviewed_by & reviewed_at] â”‚
           â”‚                      â”‚                      â”‚
           â”‚                      â–¼                      â”‚
           â”‚            [Log Decline Activity]           â”‚
           â”‚                      â”‚                      â”‚
           â”‚                      â–¼                      â–¼
           â”‚            [Send Notification]â”€â”€â”€â”€â–¶[Email: Declined]
           â”‚                      â”‚                      â”‚
           â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
           â”‚                                             â”‚
           â–¼                                             â”‚
  [Notification Received]                               â”‚
  "Property Declined"                                   â”‚
           â”‚                                             â”‚
           â–¼                                             â”‚
  [Cannot Resubmit]                                     â”‚
  [Need Create New]                                     â”‚
           â”‚                                             â”‚
           â—‰ END                                         â”‚
                                                         â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”
                          â”‚ REQUEST REVISION                 â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                 [Show Revision Notes Form]
                          â”‚
                          â–¼
                 [Admin Input Notes:]
                 "Please fix:
                  - Photos too blurry
                  - Price seems high
                  - Missing address"
                          â”‚
                          â–¼
                 {Notes filled?}
                    /         \
               [No]           [Yes]
                 /               \
    â—€â”€â”€â”€[Error]â”€â”˜                 â–¼
    â”‚                    [Update status = 'NEED_REVISION']
    â”‚                              â”‚
    â”‚                              â–¼
    â”‚                    [Save revision_notes]
    â”‚                              â”‚
    â”‚                              â–¼
    â”‚                    [Set reviewed_by & reviewed_at]
    â”‚                              â”‚
    â”‚                              â–¼
    â”‚                    [Log Revision Request]
    â”‚                              â”‚
    â”‚                              â–¼                       â–¼
    â”‚                    [Send Notification]â”€â”€â”€â”€â–¶[Email: Need Revision
    â”‚                              â”‚             + Revision Notes]
    â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
    â”‚                                                     â”‚
    â–¼                                                     â”‚
[Notification Received]                                 â”‚
"Property Needs Revision"                               â”‚
    â”‚                                                     â”‚
    â–¼                                                     â”‚
[Read Revision Notes]                                   â”‚
    â”‚                                                     â”‚
    â–¼                                                     â”‚
[Edit Property]                                          â”‚
(Fix issues based on notes)                              â”‚
    â”‚                                                     â”‚
    â–¼                                                     â”‚
[Click "Resubmit"]                                       â”‚
    â”‚                                                     â”‚
    â–¼                â–¼                                    â”‚
    â”‚      [Update status = 'PENDING']                   â”‚
    â”‚                â”‚                                    â”‚
    â”‚                â–¼                                    â”‚
    â”‚      [Set submitted_at = now()]                    â”‚
    â”‚                â”‚                                    â”‚
    â”‚                â–¼                                    â”‚
    â”‚      [Notify Admin Again]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
    â”‚                â”‚                                    â”‚
    â”‚                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                â”‚  â”‚
    â”‚                â””â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚                 â”‚
    â”‚                   â–¼                 â”‚
    â”‚         [Back to PENDING]           â”‚
    â”‚          (Repeat review cycle)      â”‚
    â”‚                                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**Key Points:**
- **5 Status:** DRAFT â†’ PENDING â†’ PUBLISHED / DECLINED / NEED_REVISION
- **Revision Loop:** NEED_REVISION dapat unlimited resubmit
- **Declined:** Permanent rejection, cannot resubmit
- **Email Notifications:** Sent at every status change
- **Activity Log:** All actions tracked for audit

---

## 8. Flowchart: Visitor Form (Lead Capture via Private Link)

```
                    â— START (Visitor)
                          â”‚
                          â–¼
            [Visitor Receives Private Link]
            (from WhatsApp/Email)
                          â”‚
                          â–¼
            [Click Link: /property/{slug}?token={token}]
                          â”‚
                          â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  VALIDATE      â”‚
                 â”‚  TOKEN         â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  {Token Valid?}
                   /          \
              [No]             [Yes]
               /                  \
              â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   [Redirect to Visitor Form]
    â”‚ ERROR PAGE:      â”‚            â”‚
    â”‚ "Link Expired"   â”‚            â–¼
    â”‚ or               â”‚   [Show Form Fields:]
    â”‚ "Link Invalid"   â”‚   - Nama (required)
    â”‚                  â”‚   - Email (required)
    â”‚ [Contact Agent]  â”‚   - Phone (optional)
    â”‚                  â”‚   - WhatsApp (optional)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‰â”€â”€â”€â”€â”€â”€â”€â”€â”˜   - Interest Level:
         END                  â—‹ Low
                             â—‹ Medium
                             â—‹ High
                             â—‹ Very High
                           - Message (optional)
                          â”‚
                          â–¼
                 [Visitor Fill Form]
                          â”‚
                          â–¼
                 [Click Submit]
                          â”‚
                          â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  VALIDATION:   â”‚
                 â”‚  - Nama filled â”‚
                 â”‚  - Email valid â”‚
                 â”‚  - Interest selâ”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  {Valid?}
                   /      \
              [No]        [Yes]
               /             \
              â–¼               â–¼
    [Show Errors]   [Check Duplicate]
              â”‚               â”‚
              â”‚               â–¼
              â”‚      {Same email+property
              â”‚       in last 24h?}
              â”‚         /         \
              â”‚     [Yes]         [No]
              â”‚      /               \
              â”‚     â–¼                 â–¼
              â”‚  [Show:        [Save to
              â”‚  "Already      property_visitors:
              â”‚   submitted"]  - visitor_name
              â”‚     â”‚           - visitor_email
              â”‚     â”‚           - visitor_phone
              â”‚     â”‚           - visitor_whatsapp
              â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”   - interest_level
              â”‚             â”‚   - message
              â”‚             â”‚   - visited_at
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   - ip_address
                            â”‚   - user_agent]
                            â”‚         â”‚
                            â–¼         â–¼
                   [Redirect to  [Increment
                    Property     access_count
                    Detail]      in property_links]
                            â”‚         â”‚
                            â”‚         â–¼
                            â”‚   {Interest Level?}
                            â”‚    /    |    \
                            â”‚   /     |     \
                            â”‚  LOW  MEDIUM  HIGH/VERY_HIGH
                            â”‚   â”‚     â”‚         â”‚
                            â”‚   â”‚     â”‚         â–¼
                            â”‚   â”‚     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   â”‚     â”‚    â”‚ SEND NOTIF:  â”‚
                            â”‚   â”‚     â”‚    â”‚ - Email Agentâ”‚
                            â”‚   â”‚     â”‚    â”‚ - Dashboard  â”‚
                            â”‚   â”‚     â”‚    â”‚ Priority Leadâ”‚
                            â”‚   â”‚     â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚   â”‚     â”‚           â”‚
                            â”‚   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚           â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                        [Visitor Views Property:
                         - Photos Gallery
                         - Description
                         - Location Map
                         - Specifications]
                                  â”‚
                                  â–¼
                        [Agent Can Track:
                         - Who viewed
                         - Interest level
                         - Contact info
                         - For follow-up]
                                  â”‚
                                  â–¼
                                 â—‰ END

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**Key Features:**
- **Lead Capture:** Mandatory form before viewing property
- **Duplicate Prevention:** 1 email per property per 24 hours
- **Interest Levels:** 4 levels (Low, Medium, High, Very High)
- **Smart Notifications:** Agent notified only for HIGH/VERY_HIGH
- **Tracking:** IP, user agent, visited_at for analytics

---

## 9. Swimlane Diagram: Property Approval Workflow

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚    AGEN         â”‚  SYSTEM           â”‚  ADMIN KANTOR    â”‚  PUBLIC BUYER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â— START           â”‚                  â”‚                  â”‚
     â”‚              â”‚                  â”‚                  â”‚
     â–¼              â”‚                  â”‚                  â”‚
[Create Property]   â”‚                  â”‚                  â”‚
     â”‚              â”‚                  â”‚                  â”‚
     â–¼              â–¼                  â”‚                  â”‚
[Submit]     [Set status='pending']   â”‚                  â”‚
     â”‚              â”‚                  â”‚                  â”‚
     â”‚              â–¼                  â”‚                  â”‚
     â”‚       [Log Activity]            â”‚                  â”‚
     â”‚              â”‚                  â”‚                  â”‚
     â”‚              â–¼                  â”‚                  â”‚
     â”‚       [Send Notification]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚            â”‚
     â—€â”€[Pending]    â”‚                       â”‚            â”‚
     â”‚              â”‚                       â–¼            â”‚
     â”‚              â”‚              [Receive Notification]â”‚
     â”‚              â”‚                       â”‚            â”‚
     â”‚              â”‚                       â–¼            â”‚
     â”‚              â”‚              [Review Property]     â”‚
     â”‚              â”‚              â€¢ Check photos        â”‚
     â”‚              â”‚              â€¢ Check description   â”‚
     â”‚              â”‚                       â”‚            â”‚
     â”‚              â”‚                       â–¼            â”‚
     â”‚              â”‚              {Decision?}           â”‚
     â”‚              â”‚                /        \          â”‚
     â”‚              â”‚          [Approve]   [Reject]      â”‚
     â”‚              â”‚            /              \        â”‚
     â”‚              â”‚           â–¼                â–¼       â”‚
     â”‚              â”‚   [Set Approved]   [Set Reason]   â”‚
     â”‚              â”‚   [Set is_public]   [Send Reason] â”‚
     â”‚              â”‚           â”‚                â”‚       â”‚
     â”‚              â–¼           â–¼                â”‚       â”‚
     â”‚       [Log Decision]                      â”‚       â”‚
     â”‚              â”‚                             â”‚       â”‚
     â”‚              â–¼                             â”‚       â”‚
     â”‚       [Send Notification]                 â”‚       â”‚
     â”‚           /                 \              â”‚       â”‚
     â”‚          â–¼                   â–¼             â”‚       â”‚
     â—€â”€[Approved Notif]       [Rejected]â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶       â”‚
     â”‚                             â”‚                      â”‚
     â–¼                             â—€â”€[Fix & Resubmit]    â”‚
{Approved?}                        â”‚                      â”‚
   /    \                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶[Loop]â”‚
[No]   [Yes]                                              â”‚
  â”‚      â”‚                                                â”‚
  â–¼      â–¼                                                â”‚
 END [Now Public]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
          â”‚                                                       â–¼
          â”‚                                              [Property Visible]
          â”‚                                              [in Marketplace]
          â”‚                                                       â”‚
          â”‚                                                       â–¼
          â”‚                                              [Can Browse & View]
          â”‚                                                       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                  â”‚
                                                                  â–¼
                                                                 â—‰ END
```

---

## 8. Decision Tables

### 8.1 Property Visibility Decision Table

| is_public | status | deleted_at | Show in Marketplace? | Accessible via Link? |
|-----------|--------|------------|----------------------|----------------------|
| TRUE | available | NULL | âœ… YES | âœ… YES |
| TRUE | pending | NULL | âœ… YES | âœ… YES |
| TRUE | sold | NULL | âŒ NO | âœ… YES (read-only) |
| TRUE | rented | NULL | âŒ NO | âœ… YES (read-only) |
| FALSE | available | NULL | âŒ NO | âœ… YES (if has valid token) |
| FALSE | * | NULL | âŒ NO | âœ… YES (if has valid token) |
| * | * | NOT NULL | âŒ NO | âŒ NO |

**Rules:**
1. Soft-deleted properties tidak accessible sama sekali
2. Public properties dengan status sold/rented hanya untuk referensi (no contact agent)
3. Private properties hanya accessible via valid token link

---

### 8.2 Commission Split Decision Table

| Agent Owner | Agent Buyer | Total Commission | Agent Owner Gets | Agent Buyer Gets | Office Gets |
|-------------|-------------|------------------|------------------|------------------|-------------|
| âœ… | âŒ | Rp 20M | Rp 14M (70%) | - | Rp 6M (30%) |
| âœ… | âœ… | Rp 20M | Rp 7M (35%) | Rp 7M (35%) | Rp 6M (30%) |
| âœ… | âŒ | Rp 10M | Rp 7M (70%) | - | Rp 3M (30%) |
| âœ… | âœ… | Rp 10M | Rp 3.5M (35%) | Rp 3.5M (35%) | Rp 3M (30%) |

**Override Rules:**
- Admin bisa ubah % split manual
- Total percentage harus = 100%
- Office minimum 20% (business rule)

---

### 8.3 Token Validation Decision Table

| Token Exists | Expired | Access Count | is_used | Result |
|--------------|---------|--------------|---------|--------|
| âŒ | - | - | - | âŒ Invalid (404) |
| âœ… | YES | - | - | âŒ Expired |
| âœ… | NO | 0 | TRUE | âœ… Valid (first access) |
| âœ… | NO | >0 | TRUE | âŒ Already Used |
| âœ… | NO | - | FALSE | âœ… Valid (reusable) |

---

## 9. Exception Handling Flows

### 9.1 Upload Photo Failed

```
[Upload Photo] â†’ {Success?}
                   /      \
              [Yes]       [No]
               /            \
              â–¼              â–¼
         [Continue]   {Error Type?}
                        /    |    \
                [Size]  [Format] [Network]
                  /        |         \
                 â–¼         â–¼          â–¼
         [Show: Max 5MB] [Show: JPG/PNG only] [Show: Retry]
                  â”‚         â”‚          â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                      [User Action]
                       /         \
                  [Retry]      [Skip]
                    /              \
                   â–¼                â–¼
            [Re-upload]        [Continue without]
```

### 9.2 Transaction Conflict

```
[Input Transaction] â†’ {Property Status?}
                         /        \
                  [Available]   [Sold/Rented]
                      /              \
                     â–¼                â–¼
               [Continue]    [Show Error]
                                "Property sudah terjual"
                                      â”‚
                                      â–¼
                                [Refresh List]
                                      â”‚
                                      â–¼
                                [Select Another]
```

---

## 10. Critical Path Analysis

### 10.1 Minimum Path to First Sale

```
1. [Admin Master Login] â†’ 2 min
2. [Create Office] â†’ 3 min
3. [Create Agent] â†’ 5 min
4. [Agent Login] â†’ 1 min
5. [Create Property + Upload Photos] â†’ 10 min
6. [Publish to Marketplace] â†’ 1 min
7. [Buyer Browse & Search] â†’ 5 min
8. [Contact Agent via WA] â†’ 1 min
9. (External: Negotiation) â†’ varies
10. [Admin Input Transaction] â†’ 5 min
11. [Commission Auto-Generated] â†’ instant
12. [Agent View Dashboard] â†’ 2 min

TOTAL: ~35 minutes (excluding negotiation)
```

---

## 11. Flow Summary per Role

### 11.1 Agen Daily Workflow

```
Login â†’ View Dashboard â†’ Create/Edit Listings â†’ Upload Photos â†’ 
Set Public/Private â†’ Monitor Views â†’ Respond to Buyer Contacts â†’ 
View Commission Status â†’ Logout
```

### 11.2 Admin Kantor Daily Workflow

```
Login â†’ View Office Dashboard â†’ Review New Properties â†’ 
Approve/Reject â†’ Input Transactions â†’ Mark Commissions Paid â†’ 
View Activity Log â†’ Generate Reports â†’ Logout
```

### 11.3 Buyer Journey

```
Visit Website â†’ Browse Listings â†’ Search & Filter â†’ 
View Property Details â†’ Contact Agent (WA) â†’ 
(External: Visit & Negotiate) â†’ Purchase Decision
```

---

**Prepared by:** AI Project Analysis System  
**Date:** 31 Oktober 2025  
**Version:** 1.0.0  
**Status:** Ready for Development Reference

